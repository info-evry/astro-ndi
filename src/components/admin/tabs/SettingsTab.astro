---
/**
 * SettingsTab - Settings management panel
 */
---

<div id="panel-settings" class="tab-panel hidden" role="tabpanel" aria-labelledby="tab-settings">
  <div class="settings-header">
    <h2>Param√®tres</h2>
    <button type="button" id="save-settings-btn" class="btn btn-primary" disabled>
      Enregistrer les modifications
    </button>
  </div>

  <!-- General Settings -->
  <div class="disclosure-group open" data-disclosure="settings-general">
    <div class="disclosure-header" onclick="toggleDisclosure('settings-general')">
      <h2><span class="disclosure-chevron sf-symbol">@sfs:chevron.right@</span> G√©n√©ral</h2>
    </div>
    <div class="disclosure-body">
      <div class="settings-card">
        <h3>Export Officiel NDI</h3>
        <div class="form-group">
          <label for="setting-school-name">Nom de l'√©cole (exact comme saisi sur le site NDI)</label>
          <input type="text" id="setting-school-name" value="Universit√© d'Evry" maxlength="256" placeholder="Universit√© d'Evry">
        </div>
      </div>

      <div class="settings-card">
        <h3>Limites de capacit√©</h3>
        <div class="settings-grid">
          <div class="form-group">
            <label for="setting-max-team">Taille max d'√©quipe</label>
            <input type="number" id="setting-max-team" min="1" max="100" value="15">
          </div>
          <div class="form-group">
            <label for="setting-max-participants">Participants max</label>
            <input type="number" id="setting-max-participants" min="1" max="10000" value="200">
          </div>
          <div class="form-group">
            <label for="setting-min-team">Taille min d'√©quipe</label>
            <input type="number" id="setting-min-team" min="1" max="50" value="1">
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Pizza Management -->
  <div class="disclosure-group open" data-disclosure="settings-pizzas">
    <div class="disclosure-header" onclick="toggleDisclosure('settings-pizzas')">
      <h2><span class="disclosure-chevron sf-symbol">@sfs:chevron.right@</span> Pizzas</h2>
    </div>
    <div class="disclosure-body">
      <div class="settings-card">
        <h3>Gestion des pizzas</h3>
        <div id="pizzas-list" class="pizzas-list"></div>

        <div id="pizza-add-form" class="pizza-add-form">
          <h4>Ajouter une pizza</h4>
          <form id="add-pizza-form-element">
            <div class="settings-grid">
              <div class="form-group">
                <label for="new-pizza-id">ID (unique)</label>
                <input type="text" id="new-pizza-id" placeholder="ex: hawaienne" required>
              </div>
              <div class="form-group">
                <label for="new-pizza-name">Nom</label>
                <input type="text" id="new-pizza-name" placeholder="ex: Hawa√Øenne" required>
              </div>
              <div class="form-group">
                <label for="new-pizza-desc">Description</label>
                <input type="text" id="new-pizza-desc" placeholder="ex: Tomate, jambon, ananas">
              </div>
            </div>
            <button type="submit" class="btn btn-secondary btn-sm"><span class="sf-symbol">@sfs:plus@</span> Ajouter</button>
          </form>
        </div>
      </div>
    </div>
  </div>

  <!-- Online Payment Settings -->
  <div class="disclosure-group open" data-disclosure="settings-payment">
    <div class="disclosure-header" onclick="toggleDisclosure('settings-payment')">
      <h2><span class="disclosure-chevron sf-symbol">@sfs:chevron.right@</span> Paiement en ligne</h2>
    </div>
    <div class="disclosure-body">
      <div class="settings-card">
        <h3>Activation</h3>
        <p class="settings-description">Activer ou d√©sactiver le paiement en ligne lors de l'inscription.</p>
        <div class="form-group">
          <label class="toggle-label">
            <input type="checkbox" id="setting-payment-enabled">
            <span class="toggle-switch"></span>
            <span>Paiement en ligne activ√©</span>
          </label>
        </div>
      </div>

      <div class="settings-card">
        <h3>Tarifs d'inscription</h3>
        <p class="settings-description">Prix de l'inscription en ligne selon la p√©riode.</p>
        <div class="settings-grid">
          <div class="form-group">
            <label for="setting-price-tier1">Prix anticip√© (‚Ç¨)</label>
            <input type="number" id="setting-price-tier1" min="0" max="100" step="0.01" value="5.00">
            <span class="form-hint">Inscription avant la date limite</span>
          </div>
          <div class="form-group">
            <label for="setting-price-tier2">Prix derni√®re semaine (‚Ç¨)</label>
            <input type="number" id="setting-price-tier2" min="0" max="100" step="0.01" value="7.00">
            <span class="form-hint">Inscription dans les derniers jours</span>
          </div>
          <div class="form-group">
            <label for="setting-tier1-cutoff-days">Jours avant deadline pour tarif anticip√©</label>
            <input type="number" id="setting-tier1-cutoff-days" min="1" max="30" value="7">
            <span class="form-hint">Nombre de jours avant la deadline</span>
          </div>
        </div>
      </div>

      <div class="settings-card">
        <h3>Date limite d'inscription</h3>
        <p class="settings-description">Date et heure de cl√¥ture des inscriptions en ligne.</p>
        <div class="form-group">
          <label for="setting-registration-deadline">Date et heure limite</label>
          <input type="datetime-local" id="setting-registration-deadline" value="">
          <span class="form-hint">Les inscriptions seront ferm√©es √† cette date</span>
        </div>
      </div>
    </div>
  </div>

  <!-- On-site Pricing Settings -->
  <div class="disclosure-group open" data-disclosure="settings-onsite">
    <div class="disclosure-header" onclick="toggleDisclosure('settings-onsite')">
      <h2><span class="disclosure-chevron sf-symbol">@sfs:chevron.right@</span> Tarification sur place</h2>
    </div>
    <div class="disclosure-body">
      <div class="settings-card">
        <h3>Tarification √† l'entr√©e</h3>
        <p class="settings-description">Prix de participation pour ceux qui paient sur place.</p>
        <div class="settings-grid">
          <div class="form-group">
            <label for="setting-price-asso-member">Prix membre asso (‚Ç¨)</label>
            <input type="number" id="setting-price-asso-member" min="0" max="100" step="0.01" value="5.00">
          </div>
          <div class="form-group">
            <label for="setting-price-non-member">Prix non-membre (‚Ç¨)</label>
            <input type="number" id="setting-price-non-member" min="0" max="100" step="0.01" value="8.00">
          </div>
          <div class="form-group">
            <label for="setting-late-cutoff">Heure limite (arriv√©e tardive)</label>
            <input type="time" id="setting-late-cutoff" value="19:00">
          </div>
          <div class="form-group">
            <label for="setting-price-late">Prix retardataire (‚Ç¨)</label>
            <input type="number" id="setting-price-late" min="0" max="100" step="0.01" value="10.00">
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Archive & Data Management -->
  <div class="disclosure-group" data-disclosure="settings-archive">
    <div class="disclosure-header" onclick="toggleDisclosure('settings-archive')">
      <h2><span class="disclosure-chevron sf-symbol">@sfs:chevron.right@</span> Archivage & Donn√©es</h2>
    </div>
    <div class="disclosure-body">
      <div class="settings-card">
        <h3>Cr√©er une archive</h3>
        <p class="settings-description">
          Archivez les donn√©es de l'√©dition actuelle avant de r√©initialiser pour la prochaine ann√©e.
          L'archive conserve une copie compl√®te des √©quipes, participants et statistiques.
        </p>
        <div class="archive-info" id="current-event-info">
          <p>Ann√©e de l'√©v√©nement : <strong id="current-event-year">-</strong></p>
          <p>√âquipes : <strong id="current-teams-count">-</strong></p>
          <p>Participants : <strong id="current-participants-count">-</strong></p>
        </div>
        <button type="button" id="create-archive-btn" class="btn btn-primary">
          üìÅ Cr√©er l'archive
        </button>
      </div>

      <div class="settings-card">
        <h3>R√©tention GDPR</h3>
        <p class="settings-description">
          Dur√©e de conservation des donn√©es personnelles dans les archives.
          Apr√®s expiration, les donn√©es sont automatiquement anonymis√©es (noms, emails supprim√©s).
        </p>
        <div class="form-group">
          <label for="setting-gdpr-retention">Dur√©e de r√©tention (ann√©es)</label>
          <input type="number" id="setting-gdpr-retention" min="1" max="10" value="3">
          <span class="form-hint">Les archives plus anciennes seront anonymis√©es</span>
        </div>
        <button type="button" id="check-expiration-btn" class="btn btn-secondary">
          üîç V√©rifier les expirations
        </button>
        <p id="expiration-result" class="result-text hidden"></p>
      </div>

      <div class="settings-card danger-zone">
        <h3><span class="sf-symbol">@sfs:exclamationmark.triangle@</span> Zone dangereuse</h3>
        <p class="settings-description warning-text">
          R√©initialisez toutes les donn√©es pour pr√©parer une nouvelle √©dition.
          <strong>Cette action est irr√©versible.</strong>
        </p>
        <div id="reset-safety-check" class="reset-safety-check">
          <p class="checking">V√©rification en cours...</p>
        </div>
        <button type="button" id="reset-data-btn" class="btn btn-danger" disabled>
          üóëÔ∏è R√©initialiser toutes les donn√©es
        </button>
      </div>
    </div>
  </div>
</div><!-- End Settings Panel -->
